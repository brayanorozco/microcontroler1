{"version":3,"sources":["../src/index.js"],"names":["main","shutdown","signal","err","console","log","error","stack","setTimeout","process","exit","unref","on"],"mappings":";;AAAA;;AACA;;AACA;;AAEA;;;;;;SAEeA,I;;;;;kEAAf;AAAA,QAIaC,QAJb;AAAA;AAAA;AAAA;AAAA;AAIaA,YAAAA,QAJb,sBAIsBC,MAJtB,EAI8B;AAEtB,qBAAO,UAAAC,GAAG,EAAI;AAEVC,gBAAAA,OAAO,CAACC,GAAR,WAAeH,MAAf;AACA,oBAAIC,GAAJ,EAASC,OAAO,CAACE,KAAR,CAAcH,GAAG,CAACI,KAAJ,IAAaJ,GAA3B;AAETK,gBAAAA,UAAU,CAAC,YAAM;AACbJ,kBAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAI,kBAAAA,OAAO,CAACC,IAAR,CAAaP,GAAG,GAAG,CAAH,GAAO,CAAvB;AAEH,iBAJS,EAIP,IAJO,CAAV,CAISQ,KAJT;AAKH,eAVD;AAWH,aAjBL;;AAAA;AAAA,mBAEU,qBAFV;;AAAA;AAmBIF,YAAAA,OAAO,CACFG,EADL,CACQ,SADR,EACmBX,QAAQ,CAAC,SAAD,CAD3B,EAEKW,EAFL,CAEQ,QAFR,EAEkBX,QAAQ,CAAC,QAAD,CAF1B,EAGKW,EAHL,CAGQ,mBAHR,EAG6BX,QAAQ,CAAC,mBAAD,CAHrC;;AAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAyBAD,IAAI","sourcesContent":["import \"core-js/stable\";\nimport \"regenerator-runtime/runtime\";\nimport \"./adapters/processor\"\n\nimport {syncDB} from './models';\n\nasync function main() {\n\n    await syncDB();\n\n    function shutdown(signal) {\n\n        return err => {\n\n            console.log(`${signal}...`);\n            if (err) console.error(err.stack || err);\n\n            setTimeout(() => {\n                console.log('...waited 2s, exiting');\n                process.exit(err ? 1 : 0);\n\n            }, 2000).unref();\n        }\n    }\n\n    process\n        .on('SIGTERM', shutdown('SIGTERM'))\n        .on('SIGINT', shutdown('SIGINT'))\n        .on('uncaughtException', shutdown('uncaughtException'));\n}\n\nmain();"],"file":"index.js"}